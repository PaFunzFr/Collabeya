<section class="message-list">
    @if (isChannel && getChannelMessages()) {
        @for (message of getChannelMessages(); track message; let index = $index) {
            @if (
                index === 0 ||
                !isSameDate(
                    message.createdAt.toDate(),
                    getChannelMessages()[index - 1].createdAt!.toDate()
                )
            ) {
                <div class="date-separator">
                    <p>{{ formatDate(message.createdAt.toDate()) }}</p>
                </div>
            }
            @if (message.threadMessages) {
                <app-chat-message
                    [messageText]="message.text"
                    [messageId]="message.id!"
                    [isOwnMessage]="false"
                    [threadCount]="message.threadMessages.length"
                    [paddingHorizontal]="'65'"
                    [isChannelMessage]="isChannel">
                </app-chat-message>
            }
        }
    } @else if (isThread && getThreadMessages()) {
        <app-chat-message
            [messageText]="'Thread Title'"
            [isOwnMessage]="false"
            [paddingHorizontal]="'16'"
            [isChannelMessage]="isChannel">
        </app-chat-message>
        <div class="answers-seperator"></div>
        @for (message of getThreadMessages(); track message) {
            @if (message) {
            <app-chat-message
                [messageText]="message.text"
                [isOwnMessage]="true"
                [paddingHorizontal]="'16'"
                [isChannelMessage]="isChannel">
            </app-chat-message>
            }
        } 
    }
</section>