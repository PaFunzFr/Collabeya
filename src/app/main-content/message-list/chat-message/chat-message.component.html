@if (isChannelMessage || isThreadTitle ||Â isThreadMessage) {
    <section 
        class="app-message"
        [style.padding]="'20px ' + paddingHorizontal + 'px'"
        [style.flexDirection]="isOwnMessage ? 'row-reverse' : 'row'"
        (mouseenter)="hoverMessage = true"
        (mouseleave)="hoverMessage = false"
    >

        <aside class="user-avatar">
            <img [src]="showAvatar()" alt="">
        </aside>

        <section class="chat-message" [style.alignItems]="isOwnMessage ? 'flex-end' : 'flex-start'">
            <div class="message-title">
                <h5>{{ showName() }}</h5>
                <p> {{ createdAt() }}</p>
            </div>

            @if (!editMode) {
                <p  
                    class="message-text"
                    [class]="isOwnMessage ? 'own-message':'normal-message'">
                    {{ text() }}
                </p>

                <div class="reactions">
                    @for (reaction of reactions(); track reaction) {
                        {{ reaction.emojiCode }} {{ reaction.count }}
                    }
                </div>

                @if(isChannelMessage) {
                    <div class="answers">
                        @if (message.threadMessages.length > 0) {
                            <!-- reply count out of database -->
                            <button (click)="openThread()">{{ message.threadMessages.length }} Replies</button>
                            <p>last on {{ dateLastThread(message.threadMessages[message.threadMessages.length -1 ].createdAt.toDate()) }}</p>
                        } @else {
                            <button (click)="openThread()">Reply</button>
                        }
                    </div>
                }

            } @else if(editMode) {
                <section class="edit-message">
                    <textarea [(ngModel)]="messageEditText"></textarea>
                    <div class="edit-menu">
                        <img src="./../../../../assets/icons/message/emoji_satisfied_grey.svg" alt="">
                        <div class="edit-buttons">
                            <button (click)="editMode = false">Cancel</button>
                            <button (click)="sendMessageUpdate(singleMessageId())">Save</button>
                        </div>
                    </div>            
                </section>
            }
        </section>

        @if (!isThreadTitle && !editMode) {
            <nav [ngClass]="{
                'left': isOwnMessage,
                'right': !isOwnMessage,
                'shown': hoverMessage
            }">
                @for (item of menuBar; track item) {
                    @if (isThreadMessage) {
                        @if (item.shownInThread) {
                            <img (click)="item.clickFunction()" [src]="item.imgSrc" alt="">
                        }
                    } @else if (isChannelMessage) {
                        <img (click)="item.clickFunction()" [src]="item.imgSrc" alt="">
                    }
                }
            </nav>
        }
        @if(emojiBar) {
            <div class="emoji-wrapper" (mouseleave)="emojiBar = false"
            [ngClass]="{
                'left': isOwnMessage,
                'right': !isOwnMessage,
                'shown': hoverMessage
            }">
                <emoji-mart
                    [set]="'apple'"
                    previewPosition="none"
                    [exclude]="['recent']"
                    [i18n]="{ categories: { people: 'Smileys' } }"
                    (emojiSelect)="onEmojiSelect($event)">
                </emoji-mart>
            </div>
        }
    </section>
}




